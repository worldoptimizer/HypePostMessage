/*
 HypePostMessage v1.0.0
 Copyright (2024) Max Ziebell, (https://maxziebell.de). MIT-license
*/
'use strict';window.HypePostMessage||(window.HypePostMessage=function(){function f(b,c,a={}){const d=a.selector||"iframe",e=a.direction||"parent",g={type:"HypePostEvent",name:b,data:c,propagate:a.propagate||!1};try{"parent"===e?window.parent.postMessage(g,"*"):"children"===e&&document.querySelectorAll(d).forEach(h=>{h.contentWindow.postMessage(g,"*")})}catch(h){console.warn(`HypePostMessage: Error posting event to ${e}:`,h)}}function k(b,c,a={}){f("HypePostMessage",{behavior:c,documentId:a.documentId},
{propagate:a.propagate||!1,selector:a.selector||"iframe",direction:a.direction||"parent"})}function l(b){if("HypePostMessage"===b.detail.name){var {data:c}=b.detail;window.HYPE&&window.HYPE.documents&&Object.values(window.HYPE.documents).forEach(a=>{a&&(!c.documentId||Array.isArray(c.documentId)&&c.documentId.includes(a.documentId())||c.documentId===a.documentId())&&a.triggerCustomBehaviorNamed(c.behavior,c)})}}window.addEventListener("message",function(b){if("HypePostEvent"===b.data.type){var {name:c,
data:a,propagate:d}=b.data;b=new CustomEvent("HypePostEventReceived",{detail:{name:c,data:a,propagate:d}});document.dispatchEvent(b);d&&(window.parent&&window.parent!==window?f(c,a,{propagate:!0,direction:"parent"}):f(c,a,{propagate:!0,direction:"children"}))}},!1);window.HYPE_eventListeners||(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(b,c,a){b.postEventToParent=function(d,e,g={}){f(d,e,{...g,direction:"parent"})};b.postEventToChildren=
function(d,e,g={}){f(d,e,{...g,direction:"children"})};b.postBehaviorToParent=function(d,e={}){k(b,d,{...e,direction:"parent"})};b.postBehaviorToChildren=function(d,e={}){k(b,d,{...e,direction:"children"})};document.addEventListener("HypePostEventReceived",function(d){"HypePostMessage"===d.detail.name&&l(d)})}});return{version:"1.0.0",Propagation:{NONE:"none",UP:"up",DOWN:"down"},postEvent:f,postBehavior:k,handleBehaviorEvent:l}}());
